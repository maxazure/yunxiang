# 自定义组件文档

## 操作流程- 以公司管理为例
#### 编写api文件
1. 打开postman的API文档
2.  在src/api/文件夹下创建company.js，
3. 复制以下代码到company.js并替换所有user为company（含大小写）
   
```javascript
import request from '@/utils/request'
/**
 * @param params  分页参数
 */
export function getUsers(params) {
  return request({
    url: '/api/users',
    method: 'get',
    params                     
  })
}

export function getUser(id) {
  return request({
    url: '/api/users/' + id,        
    method: 'get'
  })
}

/**
 * @param data  请求体传参
 */
export function addUser(data) {
  return request({
    url: '/api/users',
    method: 'post',
    data
  })
}

/**
 * @param   对应唯一id
 * @param params url传参
 */
export function putUser(id, params ) {
  return request({
    url: '/api/users/' + id,
    method: 'put',
    params
  })
}

export function delUser(id) {
  return request({
    url: '/api/users/' + id,
    method: 'delete'
  })
}
```
#### 复制crud vue文件
1. 在src/views/management下创建文件夹companies
2.  复制src/views/management/users/index.vue、add.vue、edit.vue到.../companies文件夹下

#### 编写路由文件
1. 打开路由配置文件src/router/index.js，

``` javascript
export const constantRoutes =[
        {path: '/management',             //一级url
        component: Layout,              //布局组件
        meta: {                                 //路由传参
            title: '后台管理',               //显示在侧边栏与面包屑导航栏的标题
            icon: 'tab' },                     //侧边栏的图标
        children: [
           // 二级菜单在此处添加新路由，
           //一级菜单菜单则在export const constantRoutes =[  里面直接添加  ]
            ]
        }
    ]
```
1. 复制下面代码到上面指定的位置，并替换所有users为companies（含大小写）

```javascript
  {
      path: 'users',
      name: 'Users',
      component: () => import('@/views/management/users'),
      meta: { title: '公司管理' }
    },
    {
      path: 'users/edit',
      component: () => import('@/views/management/users/edit'),
      hidden: true,
      meta: { title: '修改' }
    },
    {
      path: 'users/add',
      component: () => import('@/views/management/users/add'),
      hidden: true,
      meta: { title: '添加' }
    }
```
#### 编辑index文件
1. 打开.../companies/index.vue文件
2. 替换所有（区分大小写）

```
{ users=>companies, Users=>Companies,  user=>company,   User=>Company, 
username =>  id  } 
```

1. 根据需要增删<el-table-column>并设置prop、label
#### 编辑add.vue 文件

#### 编辑edit.vue文件


## yTable表格组件编辑

```html
    <y-table :tableData="tableData" :pagination="pagination" @changePage4List="getList">
      <template>
        <el-table-column prop="name" label="姓名"></el-table-column>

        <el-table-column label="操作">
          <template slot-scope="{row}">
            <el-button type="text" size="small" @click="edit(row.id)">修改</el-button>
            <el-button type="text" size="small" @click="del(row.id)">删除</el-button>
          </template>
        </el-table-column>
      </template>
      </y-table>
```
### yTable参数说明
* tableData表格参数
* pagination 分页参数
* changePage4List 页码/页数改变时候触发事件, 重新加载列表
* prop 绑定tableData中的要展示的数据，与PostMan API文档对应
* label  表头标签
* slot-scope="{row}" 作用域插槽将子组件参数scope.row传给父组件， 获取表格行数据
